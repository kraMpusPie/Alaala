<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Alaala</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-theme-neutral-dark);
        background-color: var(--dl-color-theme-neutral-light);

        fill: var(--dl-color-theme-neutral-dark);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://unpkg.com/animate.css@4.1.1/animate.css"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=PT+Serif:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,300;0,400;0,700;0,900;1,300;1,400;1,700;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
    />
    <style>
      [data-thq="thq-dropdown"]:hover > [data-thq="thq-dropdown-list"] {
          display: flex;
        }

        [data-thq="thq-dropdown"]:hover > div [data-thq="thq-dropdown-arrow"] {
          transform: rotate(90deg);
        }
    </style>
  </head>
  <body>
    <link rel="stylesheet" href="../style.css" />
    <div>
      <link href="./features161.css" rel="stylesheet" />
      <div class="features161-layout300 thq-section-padding">
        <div class="features161-content">
          <h2 class="features161-text thq-heading-2"><span>Obituary</span></h2>
          <span class="features161-text1 thq-body-large">
            <span>
              We provide a dedicated space for honoring and remembering your
              loved ones. Share their stories, upload photographs, and offer a
              lasting tribute to their memory. This section allows friends and
              family to pay their respects and celebrate the lives of those who
              have passed.
            </span>
          </span>
        </div>
        <div class="features161-container">
          <div class="features161-container1">
            <style>
              body {
                font-family: Arial, sans-serif;
                background-color: #f0f0f0;
                margin: 0;
                padding: 20px;
              }

              .container {
                position: relative; /* Ensure the container is a positioned parent for absolute positioning */
                max-width: 1920px;
                margin: 0 auto;
                background-color: #fff;
                padding: 20px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                border-radius: 5px;
              }

              h1 {
                text-align: center;
                margin-bottom: 20px;
                color: #333;
              }

              .buttons {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: 20px;
              }

              .back-btn {
                background-color: #008CBA; /* Blue button color */
                color: #fff;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
              }

              .back-btn:hover {
                background-color: #005F6B; /* Blue hover color */
              }

              .edit-btn {
                background-color: #4CAF50; /* Green button color */
                color: #fff;
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
              }

              .edit-btn:hover {
                background-color: #45a049; /* Green hover color */
              }

              .obituary-item {
                border: 1px solid #ddd;
                padding: 10px;
                background-color: #fff;
                box-shadow: 0 2px 5px rgba(0,0,0,0.1);
                margin-bottom: 20px;
              }

              .obituary-item img {
                max-width: 100%;
                max-height: 360px; /* Set maximum height */
                width: auto;
                height: auto;
                border-radius: 5px;
                margin: 0 auto; /* Center the image horizontally */
                display: block; /* Ensure the image is treated as a block element */
              }

              .obituary-item h3 {
                margin: 0;
                font-size: 18px;
                color: #333;
              }

              .obituary-item p {
                margin-bottom: 20px;
              }

              .popup-form-container {
                display: none; /* Hidden by default */
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0,0,0,0.5);
                justify-content: center;
                align-items: center;
              }

              .popup-form {
                background-color: #fff;
                padding: 20px;
                max-width: 600px;
                width: 100%;
                border-radius: 5px;
                box-shadow: 0 0 10px rgba(0,0,0,0.1);
                position: relative;
              }

              .close-popup-btn {
                position: absolute;
                top: 10px;
                right: 10px;
                font-size: 24px;
                font-weight: bold; /* Add font weight for a bolder close button */
                cursor: pointer;
              }

              /* Add new styles to match the layout in the image */
              .edit-obituary-form {
                display: flex; /* Arrange form elements in a row */
                flex-direction: column; /* Stack form elements on top of each other */
                margin-top: 20px; /* Add margin top for spacing */
              }

              .edit-obituary-form label {
                margin-bottom: 5px; /* Add margin bottom for spacing between labels and input fields */
              }

              #edit-obituary-form button[type='submit'] {
                background-color: #4CAF50; /* Green button color */
                color: #fff; /* White text color */
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
              }

              #edit-obituary-form button[type='submit']:hover {
                background-color: #45a049; /* Green hover color */
              }

              #delete-btn {
                background-color: #F44336; /* Red background color */
                color: #fff; /* White text color */
                padding: 10px 20px;
                border: none;
                border-radius: 5px;
                cursor: pointer;
                transition: background-color 0.3s ease;
              }

              #delete-btn:hover {
                background-color: #DA291C; /* Red hover color */
              }
            </style>

            <div class="container">
              <h1>Obituary Details</h1>
              <div class="buttons">
                <button class="back-btn" onclick="goToIndex()">
                  Back to Index
                </button>
                <button class="edit-btn" id="edit-btn">Edit Obituary</button>
              </div>
              <div id="obituary-details"></div>
            </div>

            <div class="popup-form-container" id="popupFormContainer">
              <div class="popup-form">
                <span class="close-popup-btn" onclick="closeEditForm()">Ã—</span>
                <h2>Edit Obituary</h2>
                <form id="edit-obituary-form" class="edit-obituary-form">
                  <label for="name">Name:</label>
                  <input type="text" id="name" placeholder="Name" required="" />

                  <label for="dateOfBirth">Date of Birth:</label>
                  <input type="date" id="dateOfBirth" required="" />

                  <label for="dateOfDeath">Date of Death:</label>
                  <input type="date" id="dateOfDeath" required="" />

                  <label for="message">Message:</label>
                  <textarea
                    id="message"
                    placeholder="Message"
                    rows="5"
                    required=""
                  ></textarea>

                  <label for="image">Image:</label>
                  <input type="file" id="image" accept="image/*" required="" />

                  <button type="submit">Save Changes</button>
                  <button type="button" id="delete-btn">Delete Obituary</button>
                </form>
              </div>
            </div>

            <script>
              document.addEventListener('DOMContentLoaded', loadObituaryDetails);
              document.getElementById('edit-btn').addEventListener('click', openEditForm);
              document.getElementById('edit-obituary-form').addEventListener('submit', saveChanges);
              document.getElementById('delete-btn').addEventListener('click', deleteObituary);

              function getObituaries() {
                const obituaries = localStorage.getItem('obituaries');
                return obituaries ? JSON.parse(obituaries) : [];
              }

              function loadObituaryDetails() {
                const currentObituaryId = localStorage.getItem('currentObituary');
                const obituaries = getObituaries();
                const currentObituary = obituaries.find(obituary => obituary.id === parseInt(currentObituaryId));

                if (currentObituary) {
                  const formattedDateOfBirth = formatDate(currentObituary.dateOfBirth);
                  const formattedDateOfDeath = formatDate(currentObituary.dateOfDeath);

                  const obituaryDetails = document.getElementById('obituary-details');
                  obituaryDetails.innerHTML =
                    `<div class='obituary-item'>
                      <img src='${currentObituary.image}' alt='Obituary Image'>
                      <h3>${currentObituary.name}</h3>
                      <p> Date of Birth: ${formattedDateOfBirth} </p>
                      <p> Date of Death: ${formattedDateOfDeath} </p>
                      <p> ${currentObituary.message} </p>
                    </div>`;
                } else {
                  window.location.href = 'obituaryg.html'; // Redirect to obituaryg.html if no obituary found
                }
              }

              function openEditForm() {
                const popupFormContainer = document.getElementById('popupFormContainer');
                popupFormContainer.style.display = 'flex'; // Display the popup container

                const currentObituaryId = localStorage.getItem('currentObituary');
                const obituaries = getObituaries();
                const currentObituary = obituaries.find(obituary => obituary.id === parseInt(currentObituaryId));

                if (currentObituary) {
                  document.getElementById('name').value = currentObituary.name;
                  document.getElementById('dateOfBirth').value = currentObituary.dateOfBirth;
                  document.getElementById('dateOfDeath').value = currentObituary.dateOfDeath;
                  document.getElementById('message').value = currentObituary.message;
                }
              }

              function closeEditForm() {
                const popupFormContainer = document.getElementById('popupFormContainer');
                popupFormContainer.style.display = 'none'; // Hide the popup container
              }

              function saveChanges(e) {
                e.preventDefault();

                const currentObituaryId = localStorage.getItem('currentObituary');
                const obituaries = getObituaries();
                const currentObituary = obituaries.find(obituary => obituary.id === parseInt(currentObituaryId));

                if (currentObituary) {
                  currentObituary.name = document.getElementById('name').value;
                  currentObituary.dateOfBirth = document.getElementById('dateOfBirth').value;
                  currentObituary.dateOfDeath = document.getElementById('dateOfDeath').value;
                  currentObituary.message = document.getElementById('message').value;

                  const imageInput = document.getElementById('image');
                  const reader = new FileReader();

                  reader.onload = function(event) {
                    currentObituary.image = event.target.result;
                    saveObituaries(obituaries);
                    loadObituaryDetails();
                    closeEditForm(); // Close the popup after saving changes

                    document.getElementById('edit-obituary-form').reset();
                    alert('Changes saved successfully!'); // Display alert message
                  }

                  if (imageInput.files.length > 0) {
                    reader.readAsDataURL(imageInput.files[0]);
                  } else {
                    saveObituaries(obituaries);
                    loadObituaryDetails();
                    closeEditForm(); // Close the popup after saving changes
                    alert('Changes saved successfully!'); // Display alert message
                  }
                }
              }

              function deleteObituary() {
                const currentObituaryId = localStorage.getItem('currentObituary');
                const obituaries = getObituaries();
                const currentObituary = obituaries.find(obituary => obituary.id === parseInt(currentObituaryId));

                if (currentObituary) {
                  const confirmation = confirm('Are you sure you want to delete this obituary?');

                  if (confirmation) {
                    obituaries.splice(obituaries.indexOf(currentObituary), 1);
                    saveObituaries(obituaries);
                    localStorage.removeItem('currentObituary');
                    window.location.href = 'obituaryg.html'; // Redirect to obituaryg.html after deleting obituary
                  }
                }
              }

              function saveObituaries(obituaries) {
                localStorage.setItem('obituaries', JSON.stringify(obituaries));
              }

              function formatDate(dateString) {
                const options = { year: 'numeric', month: '2-digit', day: '2-digit' };
                const date = new Date(dateString);
                return date.toLocaleDateString('en-US', options);
              }

              function goToIndex() {
                window.location.href = 'obituaryg.html'; // Redirect to obituaryg.html
              }
            </script>
          </div>
        </div>
      </div>
    </div>
    <script
      defer=""
      src="https://unpkg.com/@teleporthq/teleport-custom-scripts"
    ></script>
  </body>
</html>
